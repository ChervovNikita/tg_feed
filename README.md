# TG Channel Filter - ML-powered Telegram Post Filtering

[![Python 3.11](https://img.shields.io/badge/python-3.11-blue.svg)](https://www.python.org/downloads/)
[![Docker](https://img.shields.io/badge/docker-compose-2496ED.svg)](https://www.docker.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

> ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾ÑÑ‚Ð¾Ð² Ð¸Ð· Telegram ÐºÐ°Ð½Ð°Ð»Ð¾Ð² Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¼Ð°ÑˆÐ¸Ð½Ð½Ð¾Ð³Ð¾ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ.

## ðŸ“‹ Ð‘Ð¸Ð·Ð½ÐµÑ-Ñ†ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°**: ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ñ‹ Ð½Ð° Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Telegram ÐºÐ°Ð½Ð°Ð»Ð¾Ð², Ð½Ð¾ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ Ñ‡Ð¸Ñ‚Ð°ÑŽÑ‚ Ð»Ð¸ÑˆÑŒ 10-20% Ð¿Ð¾ÑÑ‚Ð¾Ð². Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ð¿ÐµÑ€ÐµÐ³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ñ€Ð¸Ð²Ð¾Ð´Ð¸Ñ‚ Ðº Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÑƒ Ð²Ð°Ð¶Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° Ð¸ Ñ‚Ñ€Ð°Ñ‚Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð° Ð½ÐµÐ¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾Ðµ.

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ**: Ð‘Ð¾Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÑ‚ Ð¿Ð¾ÑÑ‚Ñ‹ Ð¸Ð· ÐºÐ°Ð½Ð°Ð»Ð¾Ð² Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ:
- ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÑŽÑ‰Ð¸Ðµ ÐºÐ°Ð½Ð°Ð»Ñ‹
- Ð¡Ñ‚Ð°Ð²Ð¸Ñ‚ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸ (ðŸ‘/ðŸ‘Ž) Ð½Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼Ñ‹Ðµ Ð¿Ð¾ÑÑ‚Ñ‹
- ML-Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð¾Ð±ÑƒÑ‡Ð°ÐµÑ‚ÑÑ Ð½Ð° Ñ€ÐµÐ°ÐºÑ†Ð¸ÑÑ… Ð¸ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ»ÐµÐ²Ð°Ð½Ñ‚Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚

**Ð¦ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ**:
- â±ï¸ Ð­ÐºÐ¾Ð½Ð¾Ð¼Ð¸Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð° Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»ÐµÐ½Ñ‚Ñ‹
- ðŸŽ¯ ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
- ðŸ“ˆ Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ñ€ÐµÐ°ÐºÑ†Ð¸ÐµÐ¹

## ðŸ—ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TELEGRAM                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ÐšÐ°Ð½Ð°Ð»Ñ‹    â”‚                                        â”‚   ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚                                                â”‚ Ð¿ÐµÑ€ÐµÑÑ‹Ð»Ð°ÐµÑ‚
          â–¼                                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Userbot      â”‚                                    â”‚       Bot           â”‚
â”‚   (Pyrogram)    â”‚                                    â”‚    (aiogram)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                        â”‚
         â–¼                                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              KAFKA                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  raw_posts   â”‚ â”€â”€â”€â”€ â”‚ filtered_posts â”‚ â”€â”€â”€â”€ â”‚    reactions     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â–²                        â”‚
         â–¼                        â”‚                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ML SERVICE (FastAPI)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ OpenAI Embeddingsâ”‚  â”‚ LogReg Classifierâ”‚  â”‚ Kafka Consumers     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PostgreSQL + pgvector                                 â”‚
â”‚  users | subscriptions | posts | predictions | reactions | user_models      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                        â”‚
         â–¼                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Airflow        â”‚                              â”‚      Monitoring        â”‚
â”‚  - retrain_models   â”‚                              â”‚  Prometheus + Grafana  â”‚
â”‚  - compute_metrics  â”‚                              â”‚      Streamlit         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- Docker Ð¸ Docker Compose
- OpenAI API Key
- Telegram Bot Token (Ð¾Ñ‚ @BotFather)
- Telegram API credentials (Ð¾Ñ‚ https://my.telegram.org)

### 1. ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ

```bash
git clone https://github.com/your-username/tg_channel_filter.git
cd tg_channel_filter
```

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»
cat > .env << EOF
# Telegram Bot
BOT_TOKEN=your_bot_token_from_botfather

# Telegram API (Ð´Ð»Ñ userbot)
API_ID=your_api_id
API_HASH=your_api_hash
SESSION_STRING=your_session_string

# OpenAI
OPENAI_API_KEY=your_openai_api_key

# Database
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=tg_filter

# Airflow (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼)
AIRFLOW__CORE__FERNET_KEY=
AIRFLOW__WEBSERVER__SECRET_KEY=secret

# Grafana
GF_SECURITY_ADMIN_PASSWORD=admin
EOF
```

### 3. ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Session String Ð´Ð»Ñ Pyrogram

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ pyrogram Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
pip install pyrogram tgcrypto

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚
python -c "
from pyrogram import Client
app = Client('my_account', api_id=YOUR_API_ID, api_hash='YOUR_API_HASH')
with app:
    print(app.export_session_string())
"
```

### 4. Ð—Ð°Ð¿ÑƒÑÐº ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹

```bash
docker-compose up -d
```

### 5. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°

```bash
docker-compose ps
```

## ðŸ“¦ ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹

| Ð¡ÐµÑ€Ð²Ð¸Ñ | ÐŸÐ¾Ñ€Ñ‚ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|--------|------|----------|
| **ML Service** | 8000 | FastAPI Ñ OpenAPI Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÐµÐ¹ |
| **Streamlit** | 8501 | ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´ |
| **Grafana** | 3000 | ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¼ÐµÑ‚Ñ€Ð¸Ðº |
| **Airflow** | 8080 | ÐžÑ€ÐºÐµÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ DAG'Ð¾Ð² |
| **PostgreSQL** | 5432 | Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… |
| **Kafka** | 9092 | Ð‘Ñ€Ð¾ÐºÐµÑ€ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ |
| **Prometheus** | 9090 | Ð¡Ð±Ð¾Ñ€ Ð¼ÐµÑ‚Ñ€Ð¸Ðº |

## ðŸ¤– Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð±Ð¾Ñ‚Ð°

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð° Ð² Telegram Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ `/start`.

### Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

| ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|---------|----------|
| `/start` | ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ Ð±Ð¾Ñ‚Ð¾Ð¼ |
| `/add_channel @username` | Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ð½Ð°Ð» Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ |
| `/list_channels` | ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ°Ð½Ð°Ð»Ð¾Ð² |
| `/remove_channel @username` | Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ð½Ð°Ð» |
| `/stats` | ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ |
| `/help` | Ð¡Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¿Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼ |

### Ð ÐµÐ°ÐºÑ†Ð¸Ð¸ Ð½Ð° Ð¿Ð¾ÑÑ‚Ñ‹

- ðŸ‘ â€” ÐÑ€Ð°Ð²Ð¸Ñ‚ÑÑ (Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¿Ð¾Ñ…Ð¾Ð¶ÐµÐ³Ð¾)
- ðŸ‘Ž â€” ÐÐµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ (Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ñ…Ð¾Ð¶ÐµÐµ)
- ðŸ”‡ â€” ÐžÑ‚Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð¾Ñ‚ ÐºÐ°Ð½Ð°Ð»Ð°

## ðŸ“Š ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### Grafana (http://localhost:3000)
- Login: admin / admin
- Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´Ñ‹: ML Metrics, Business Metrics

### Streamlit (http://localhost:8501)
- Overview: Ð¾Ð±Ñ‰Ð°Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
- Predictions: Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ð½Ð¸Ð¹
- Users: Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° Ð¿Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼
- Metrics: Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ€ÑÐ´Ñ‹ Ð¼ÐµÑ‚Ñ€Ð¸Ðº

### Airflow (http://localhost:8080)
- Login: admin / admin
- DAGs: retrain_user_models, compute_metrics

## ðŸ”§ API Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

ML Service Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ OpenAPI (Swagger) Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ:

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÑÐ½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚Ñ‹

```
GET  /health              - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ ÑÐµÑ€Ð²Ð¸ÑÐ°
POST /embeddings          - ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑÐ¼Ð±ÐµÐ´Ð´Ð¸Ð½Ð³Ð¸ Ð´Ð»Ñ Ñ‚ÐµÐºÑÑ‚Ð°/Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ
POST /predict             - ÐŸÑ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ€ÐµÐ»ÐµÐ²Ð°Ð½Ñ‚Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾ÑÑ‚Ð°
GET  /model/{user_id}     - Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
POST /retrain/{user_id}   - Ð¢Ñ€Ð¸Ð³Ð³ÐµÑ€ Ð¿ÐµÑ€ÐµÐ¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¼Ð¾Ð´ÐµÐ»Ð¸
GET  /metrics             - Prometheus Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸
```

## ðŸ§ª ML Pipeline

1. **Ð­Ð¼Ð±ÐµÐ´Ð´Ð¸Ð½Ð³Ð¸**: OpenAI text-embedding-3-small (1536 dims)
2. **Ð¤Ð¸Ñ‡Ð¸**: ÐºÐ¾Ð½ÐºÐ°Ñ‚ÐµÐ½Ð°Ñ†Ð¸Ñ [text_embedding, image_embedding]
3. **ÐœÐ¾Ð´ÐµÐ»ÑŒ**: LogisticRegression (sklearn)
4. **ÐžÐ±ÑƒÑ‡ÐµÐ½Ð¸Ðµ**: Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 6 Ñ‡Ð°ÑÐ¾Ð² (Airflow)
5. **Ð˜Ð½Ñ„ÐµÑ€ÐµÐ½Ñ**: real-time Ñ‡ÐµÑ€ÐµÐ· Kafka

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
tg_channel_filter/
â”œâ”€â”€ docker-compose.yml          # ÐžÑ€ÐºÐµÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
â”œâ”€â”€ README.md                   # Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
â”œâ”€â”€ one-pager.md               # ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
â”œâ”€â”€ requirements/               # Python Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ml_service/            # FastAPI ML ÑÐµÑ€Ð²Ð¸Ñ
â”‚   â”œâ”€â”€ bot/                   # Telegram Ð±Ð¾Ñ‚ (aiogram)
â”‚   â”œâ”€â”€ userbot/               # Userbot Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ ÐºÐ°Ð½Ð°Ð»Ð¾Ð²
â”‚   â””â”€â”€ streamlit/             # ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ UI
â”œâ”€â”€ airflow/
â”‚   â””â”€â”€ dags/                  # Airflow DAG'Ð¸
â”œâ”€â”€ database/
â”‚   â””â”€â”€ init.sql               # Ð¡Ñ…ÐµÐ¼Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
â””â”€â”€ monitoring/
    â”œâ”€â”€ prometheus.yml         # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Prometheus
    â””â”€â”€ grafana/               # Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´Ñ‹ Grafana
```

## ðŸŽ¯ ÐŸÐ¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ ÐºÑƒÑ€ÑÐ°

### Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ (6-7 Ð±Ð°Ð»Ð»Ð¾Ð²)
- âœ… Docker-compose Ð´Ð»Ñ Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
- âœ… README Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð¾Ð¹ Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÐµÐ¹
- âœ… Ð‘Ð¸Ð·Ð½ÐµÑ-Ñ†ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð°
- âœ… ML-ÑÐµÑ€Ð²Ð¸Ñ (Ð¸Ð½Ñ„ÐµÑ€ÐµÐ½Ñ)
- âœ… Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… (PostgreSQL + pgvector)
- âœ… Ð‘Ñ€Ð¾ÐºÐµÑ€ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ (Kafka)
- âœ… UI (Streamlit + Telegram Bot)
- âœ… ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ (Grafana + Prometheus)

### ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ (8-10 Ð±Ð°Ð»Ð»Ð¾Ð²)
- âœ… **Ð¡ÐµÑ€Ð²Ð¸Ñ Ð¸Ð½Ñ„ÐµÑ€ÐµÐ½ÑÐ° Ñ Ð±Ñ€Ð¾ÐºÐµÑ€Ð¾Ð¼** â€” ML Service + Kafka consumers
- âœ… **Ð‘Ð” Ñ ETL/Ð¾Ñ€ÐºÐµÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼** â€” Airflow DAGs Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¸ Ð¼ÐµÑ‚Ñ€Ð¸Ðº
- âœ… **ÐŸÐµÑ€ÐµÐ¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð±ÐµÐ· Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸** â€” hot-reload Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Ñ‡ÐµÑ€ÐµÐ· API
- âœ… **ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ñ‹Ð¹ UI** â€” Streamlit Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° + OpenAPI Ð² ML Service

## ðŸ› ï¸ Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°

### Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²

```bash
# ML Service
cd services/ml_service
pip install -r requirements.txt
uvicorn main:app --reload

# Bot
cd services/bot
pip install -r requirements.txt
python main.py
```

### ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²

```bash
docker-compose logs -f ml-service
docker-compose logs -f bot
docker-compose logs -f userbot
```

## ðŸ“ Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

MIT License

## ðŸ‘¤ ÐÐ²Ñ‚Ð¾Ñ€

MLOps Course Final Project

